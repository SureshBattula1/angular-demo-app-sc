<div class="section-view-container" *ngIf="!isLoading && sectionData">
  <!-- Action Bar -->
  <div class="action-bar">
    <button mat-button (click)="onBack()">
      <mat-icon>arrow_back</mat-icon>
      Back to List
    </button>
    <div class="action-buttons">
      <button mat-raised-button color="primary" (click)="onEdit()">
        <mat-icon>edit</mat-icon>
        Edit
      </button>
      <button mat-raised-button color="warn" (click)="onDelete()">
        <mat-icon>delete</mat-icon>
        Delete
      </button>
    </div>
  </div>

  <!-- Header Card -->
  <mat-card class="header-card">
    <mat-card-content>
      <div class="section-header">
        <div class="section-logo">
          <mat-icon class="logo-icon">view_module</mat-icon>
        </div>
        <div class="section-info">
          <h1 class="section-name">Section {{ sectionData.name }}</h1>
          <div class="section-meta">
            <span class="code-badge">
              <mat-icon>qr_code</mat-icon>
              {{ sectionData.code }}
            </span>
            <span class="grade-badge" *ngIf="sectionData.grade_level">
              <mat-icon>school</mat-icon>
              Grade {{ sectionData.grade_level }}
            </span>
            <span class="room-number" *ngIf="sectionData.room_number">
              <mat-icon>room</mat-icon>
              Room {{ sectionData.room_number }}
            </span>
            <span class="status-badge" [class.active]="sectionData.is_active">
              <mat-icon>circle</mat-icon>
              {{ sectionData.is_active ? 'Active' : 'Inactive' }}
            </span>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Statistics Card -->
  <div class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon students">
          <mat-icon>people</mat-icon>
        </div>
        <div class="stat-details">
          <div class="stat-value">{{ sectionData.current_strength }}</div>
          <div class="stat-label">Current Students</div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon capacity">
          <mat-icon>event_seat</mat-icon>
        </div>
        <div class="stat-details">
          <div class="stat-value">{{ sectionData.capacity }}</div>
          <div class="stat-label">Total Capacity</div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon available">
          <mat-icon>done_all</mat-icon>
        </div>
        <div class="stat-details">
          <div class="stat-value">{{ getAvailableSeats() }}</div>
          <div class="stat-label">Available Seats</div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon occupancy" [ngClass]="getOccupancyColor()">
          <mat-icon>pie_chart</mat-icon>
        </div>
        <div class="stat-details">
          <div class="stat-value">{{ getOccupancyPercentage() }}%</div>
          <div class="stat-label">Occupancy</div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Details Section -->
  <div class="details-grid">
    <mat-card class="detail-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>info</mat-icon>
          Class Information
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="detail-row">
          <span class="detail-label">Branch:</span>
          <span class="detail-value">{{ sectionData.branch?.name }} ({{ sectionData.branch?.code }})</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Room Number:</span>
          <span class="detail-value">{{ sectionData.room_number || 'Not Assigned' }}</span>
        </div>
        <div class="detail-row" *ngIf="sectionData.description">
          <span class="detail-label">Description:</span>
          <span class="detail-value">{{ sectionData.description }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Status:</span>
          <span class="detail-value" [class.text-success]="sectionData.is_active" [class.text-muted]="!sectionData.is_active">
            {{ sectionData.is_active ? 'Active' : 'Inactive' }}
          </span>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Capacity Details Card -->
    <mat-card class="detail-card capacity-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>people</mat-icon>
          Capacity Details
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="capacity-info">
          <div class="capacity-stat">
            <div class="capacity-label">Total Capacity</div>
            <div class="capacity-value primary">{{ sectionData.capacity }}</div>
          </div>
          <div class="capacity-stat">
            <div class="capacity-label">Current Strength</div>
            <div class="capacity-value accent">{{ sectionData.current_strength }}</div>
          </div>
          <div class="capacity-stat">
            <div class="capacity-label">Available Seats</div>
            <div class="capacity-value success">{{ getAvailableSeats() }}</div>
          </div>
        </div>

        <!-- Occupancy Bar -->
        <div class="occupancy-section">
          <div class="occupancy-label">
            <span>Occupancy</span>
            <span class="occupancy-percentage">{{ getOccupancyPercentage() }}%</span>
          </div>
          <mat-progress-bar 
            mode="determinate" 
            [value]="getOccupancyPercentage()" 
            [color]="getOccupancyColor()">
          </mat-progress-bar>
        </div>

        <!-- Class Teacher -->
        <div class="teacher-section" *ngIf="sectionData.classTeacher">
          <mat-divider></mat-divider>
          <div class="teacher-info">
            <mat-icon>person</mat-icon>
            <div>
              <div class="teacher-label">Class Teacher</div>
              <div class="teacher-name">
                {{ sectionData.classTeacher.first_name }} {{ sectionData.classTeacher.last_name }}
              </div>
              <div class="teacher-email">{{ sectionData.classTeacher.email }}</div>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="isLoading">
  <mat-spinner diameter="50"></mat-spinner>
  <p>Loading section details...</p>
</div>

